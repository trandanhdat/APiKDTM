2025-11-13 21:24:23.409 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-13 21:24:24.014 +07:00 [INF] Now listening on: https://localhost:7161
2025-11-13 21:24:24.017 +07:00 [INF] Now listening on: http://localhost:5266
2025-11-13 21:24:24.022 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-13 21:24:24.024 +07:00 [INF] Hosting environment: Development
2025-11-13 21:24:24.026 +07:00 [INF] Content root path: D:\hocAPI\APi\APi
2025-11-13 21:24:25.268 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger - null null
2025-11-13 21:24:25.595 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger - 301 0 null 329.0529ms
2025-11-13 21:24:25.599 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/index.html - null null
2025-11-13 21:24:25.789 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/index.html - 200 null text/html;charset=utf-8 189.5604ms
2025-11-13 21:24:25.802 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_vs/browserLink - null null
2025-11-13 21:24:25.803 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/swagger-ui-bundle.js - null null
2025-11-13 21:24:25.798 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/swagger-ui-standalone-preset.js - null null
2025-11-13 21:24:25.812 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-13 21:24:25.790 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/swagger-ui.css - null null
2025-11-13 21:24:25.882 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 70.0614ms
2025-11-13 21:24:25.918 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-11-13 21:24:25.918 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-11-13 21:24:25.933 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-11-13 21:24:25.934 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 136.6754ms
2025-11-13 21:24:25.934 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/swagger-ui.css - 200 143943 text/css 144.782ms
2025-11-13 21:24:25.943 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 145.7331ms
2025-11-13 21:24:25.973 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 170.0414ms
2025-11-13 21:24:26.274 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:24:26.313 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/favicon-32x32.png - null null
2025-11-13 21:24:26.327 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-11-13 21:24:26.331 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/favicon-32x32.png - 200 628 image/png 18.9312ms
2025-11-13 21:24:26.445 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 172.0765ms
2025-11-13 21:29:19.075 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-13 21:29:19.640 +07:00 [INF] Now listening on: https://localhost:7161
2025-11-13 21:29:19.644 +07:00 [INF] Now listening on: http://localhost:5266
2025-11-13 21:29:19.674 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-13 21:29:19.681 +07:00 [INF] Hosting environment: Development
2025-11-13 21:29:19.684 +07:00 [INF] Content root path: D:\hocAPI\APi\APi
2025-11-13 21:29:20.383 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/index.html - null null
2025-11-13 21:29:20.757 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/index.html - 200 null text/html;charset=utf-8 385.0132ms
2025-11-13 21:29:20.802 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_vs/browserLink - null null
2025-11-13 21:29:20.802 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-13 21:29:20.920 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 118.0323ms
2025-11-13 21:29:21.002 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 201.1672ms
2025-11-13 21:29:21.309 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:29:21.684 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 375.2035ms
2025-11-13 21:29:24.817 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v2/swagger.json - null null
2025-11-13 21:29:24.838 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v2/swagger.json - 200 null application/json;charset=utf-8 21.048ms
2025-11-13 21:29:29.145 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:29:29.197 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 59.738ms
2025-11-13 21:29:30.577 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v2/swagger.json - null null
2025-11-13 21:29:30.592 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v2/swagger.json - 200 null application/json;charset=utf-8 14.643ms
2025-11-13 21:29:31.334 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:29:31.370 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 37.0702ms
2025-11-13 21:29:34.804 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v2/swagger.json - null null
2025-11-13 21:29:34.818 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v2/swagger.json - 200 null application/json;charset=utf-8 15.0359ms
2025-11-13 21:29:39.615 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:29:39.645 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 30.5583ms
2025-11-13 21:30:11.546 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/v1/Products/AllProduct - null null
2025-11-13 21:30:13.553 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-13 21:30:13.561 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-13 21:30:13.564 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/v1/Products/AllProduct - 401 0 null 2018.6988ms
2025-11-13 21:30:39.903 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Auth/Login - application/json 49
2025-11-13 21:30:39.929 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:30:39.931 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:30:39.938 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-11-13 21:30:39.980 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(APi.Models.LoginRequestDTO) on controller APi.Controllers.AuthController (APi).
2025-11-13 21:30:45.387 +07:00 [INF] Executed DbCommand (630ms) [Parameters=[@__request_Username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[createdAt], [u].[email], [u].[fullname], [u].[isActive], [u].[lastLogin], [u].[password], [u].[phone], [u].[role], [u].[username]
FROM [Users] AS [u]
WHERE [u].[username] = @__request_Username_0 AND [u].[isActive] = CAST(1 AS bit)
2025-11-13 21:30:47.771 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[APi.Models.DTO.AuthResponse, APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-13 21:30:47.864 +07:00 [INF] Executed action APi.Controllers.AuthController.Login (APi) in 7876.0968ms
2025-11-13 21:30:47.869 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-11-13 21:30:47.897 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Auth/Login - 200 null application/json; charset=utf-8 7994.2479ms
2025-11-13 21:31:12.413 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/v1/Products/AllProduct - null null
2025-11-13 21:31:12.491 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-11-13 21:31:12.501 +07:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProducts() on controller APi.Controllers.ProductsController (APi).
2025-11-13 21:31:12.602 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [p].[Description], [p].[Price], [p].[ImagePath], [p].[CreatedAt], [p].[UpdatedAt], [l].[Id], [l].[TenLoai]
FROM [products] AS [p]
INNER JOIN [Loai] AS [l] ON [p].[CategoryId] = [l].[Id]
2025-11-13 21:31:12.611 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType8`8[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType9`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-13 21:31:12.625 +07:00 [INF] Executed action APi.Controllers.ProductsController.GetProducts (APi) in 118.9468ms
2025-11-13 21:31:12.627 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-11-13 21:31:12.630 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/v1/Products/AllProduct - 200 null application/json; charset=utf-8 218.0126ms
2025-11-13 21:33:30.850 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/v1/Products/GetProduct/1 - null null
2025-11-13 21:33:30.864 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.GetProduct (APi)'
2025-11-13 21:33:30.871 +07:00 [INF] Route matched with {action = "GetProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProduct(Int32) on controller APi.Controllers.ProductsController (APi).
2025-11-13 21:33:30.946 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CategoryId], [p].[CreatedAt], [p].[Description], [p].[ImagePath], [p].[Name], [p].[Price], [p].[UpdatedAt], [l].[Id], [l].[MaLoai], [l].[MoTa], [l].[TenLoai]
FROM [products] AS [p]
INNER JOIN [Loai] AS [l] ON [p].[CategoryId] = [l].[Id]
WHERE [p].[Id] = @__id_0
2025-11-13 21:33:30.952 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-13 21:33:30.956 +07:00 [INF] Executed action APi.Controllers.ProductsController.GetProduct (APi) in 80.8357ms
2025-11-13 21:33:30.958 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.GetProduct (APi)'
2025-11-13 21:33:30.960 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/v1/Products/GetProduct/1 - 404 null application/json; charset=utf-8 111.2105ms
2025-11-13 21:33:36.167 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v2/swagger.json - null null
2025-11-13 21:33:36.179 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v2/swagger.json - 200 null application/json;charset=utf-8 12.5921ms
2025-11-13 21:33:41.431 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7161/api/v2/Products/DeleteProduct/1 - null null
2025-11-13 21:33:41.451 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:33:41.454 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:33:41.458 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-11-13 21:33:41.460 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-13 21:33:41.462 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7161/api/v2/Products/DeleteProduct/1 - 401 0 null 31.2721ms
2025-11-13 21:33:51.086 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/v2/Products/GetProduct/1 - null null
2025-11-13 21:33:51.106 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-13 21:33:51.109 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-13 21:33:51.111 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/v2/Products/GetProduct/1 - 401 0 null 25.5664ms
2025-11-13 21:36:49.413 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/v2/Products/CreateProduct - application/json 305
2025-11-13 21:36:49.425 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:36:49.427 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:36:49.429 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-11-13 21:36:49.431 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-13 21:36:49.433 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/v2/Products/CreateProduct - 401 0 null 20.746ms
2025-11-13 21:36:57.989 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:36:58.017 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.6238ms
2025-11-13 21:37:08.074 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Auth/Login - application/json 49
2025-11-13 21:37:08.082 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:37:08.085 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:37:08.087 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-11-13 21:37:08.090 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(APi.Models.LoginRequestDTO) on controller APi.Controllers.AuthController (APi).
2025-11-13 21:37:08.178 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_Username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[createdAt], [u].[email], [u].[fullname], [u].[isActive], [u].[lastLogin], [u].[password], [u].[phone], [u].[role], [u].[username]
FROM [Users] AS [u]
WHERE [u].[username] = @__request_Username_0 AND [u].[isActive] = CAST(1 AS bit)
2025-11-13 21:37:08.374 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[APi.Models.DTO.AuthResponse, APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-13 21:37:08.378 +07:00 [INF] Executed action APi.Controllers.AuthController.Login (APi) in 282.919ms
2025-11-13 21:37:08.381 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-11-13 21:37:08.385 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Auth/Login - 200 null application/json; charset=utf-8 310.6116ms
2025-11-13 21:37:39.194 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/Auth/TestConnect - null null
2025-11-13 21:37:39.210 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.TestConnect (APi)'
2025-11-13 21:37:39.215 +07:00 [INF] Route matched with {action = "TestConnect", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TestConnect() on controller APi.Controllers.AuthController (APi).
2025-11-13 21:37:39.233 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-13 21:37:39.237 +07:00 [INF] Executed action APi.Controllers.AuthController.TestConnect (APi) in 17.1272ms
2025-11-13 21:37:39.240 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.TestConnect (APi)'
2025-11-13 21:37:39.243 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/Auth/TestConnect - 200 null application/json; charset=utf-8 48.18ms
2025-11-13 21:37:44.875 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/Auth/profile1 - null null
2025-11-13 21:37:44.890 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.GetProfile (APi)'
2025-11-13 21:37:44.893 +07:00 [INF] Route matched with {action = "GetProfile", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProfile() on controller APi.Controllers.AuthController (APi).
2025-11-13 21:37:44.899 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`5[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-13 21:37:44.908 +07:00 [INF] Executed action APi.Controllers.AuthController.GetProfile (APi) in 10.6317ms
2025-11-13 21:37:44.912 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.GetProfile (APi)'
2025-11-13 21:37:44.915 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/Auth/profile1 - 200 null application/json; charset=utf-8 40.1573ms
2025-11-13 21:37:46.124 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/Auth/profile1 - null null
2025-11-13 21:37:46.130 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.GetProfile (APi)'
2025-11-13 21:37:46.133 +07:00 [INF] Route matched with {action = "GetProfile", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProfile() on controller APi.Controllers.AuthController (APi).
2025-11-13 21:37:46.138 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`5[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-13 21:37:46.141 +07:00 [INF] Executed action APi.Controllers.AuthController.GetProfile (APi) in 4.1388ms
2025-11-13 21:37:46.145 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.GetProfile (APi)'
2025-11-13 21:37:46.147 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/Auth/profile1 - 200 null application/json; charset=utf-8 24.2311ms
2025-11-13 21:37:55.474 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - application/json 305
2025-11-13 21:37:55.480 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:37:55.483 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:37:55.486 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-11-13 21:37:55.498 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-11-13 21:37:55.501 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - 403 0 null 27.0355ms
2025-11-13 21:38:15.730 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json - null null
2025-11-13 21:38:15.770 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 40.834ms
2025-11-13 21:38:15.780 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-11-13 21:38:33.443 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - application/json 305
2025-11-13 21:38:33.450 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:38:33.452 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:38:33.455 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-11-13 21:38:33.458 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-11-13 21:38:33.464 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - 403 0 null 21.2816ms
2025-11-13 21:39:06.741 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/v2/Products/CreateProduct - null null
2025-11-13 21:39:06.785 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-11-13 21:39:06.793 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-11-13 21:39:06.800 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/v2/Products/CreateProduct - 405 0 null 61.0343ms
2025-11-13 21:39:29.479 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/v1/Products/AllProduct - null null
2025-11-13 21:39:29.486 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-11-13 21:39:29.489 +07:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProducts() on controller APi.Controllers.ProductsController (APi).
2025-11-13 21:39:29.501 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [p].[Description], [p].[Price], [p].[ImagePath], [p].[CreatedAt], [p].[UpdatedAt], [l].[Id], [l].[TenLoai]
FROM [products] AS [p]
INNER JOIN [Loai] AS [l] ON [p].[CategoryId] = [l].[Id]
2025-11-13 21:39:29.506 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType8`8[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType9`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-13 21:39:29.509 +07:00 [INF] Executed action APi.Controllers.ProductsController.GetProducts (APi) in 16.9956ms
2025-11-13 21:39:29.518 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-11-13 21:39:29.521 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/v1/Products/AllProduct - 200 null application/json; charset=utf-8 42.5604ms
2025-11-13 21:42:09.750 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-13 21:42:10.307 +07:00 [INF] Now listening on: https://localhost:7161
2025-11-13 21:42:10.312 +07:00 [INF] Now listening on: http://localhost:5266
2025-11-13 21:42:10.319 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-13 21:42:10.323 +07:00 [INF] Hosting environment: Development
2025-11-13 21:42:10.326 +07:00 [INF] Content root path: D:\hocAPI\APi\APi
2025-11-13 21:42:11.421 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/index.html - null null
2025-11-13 21:42:11.860 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/index.html - 200 null text/html;charset=utf-8 465.6565ms
2025-11-13 21:42:11.897 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-13 21:42:11.897 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_vs/browserLink - null null
2025-11-13 21:42:11.940 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 42.9831ms
2025-11-13 21:42:12.154 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 257.9126ms
2025-11-13 21:42:12.467 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:42:13.001 +07:00 [ERR] Đã xảy ra lỗi không mong muốn
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - APi.Controllers.ProductsController.getCategory (APi). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at APi.Services.GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\hocAPI\APi\APi\Services\GlobalExceptionMiddleware.cs:line 16
2025-11-13 21:42:13.167 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 500 null application/json; charset=utf-8 700.6635ms
2025-11-13 21:42:18.395 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json - null null
2025-11-13 21:42:18.650 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 256.1812ms
2025-11-13 21:42:18.665 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-11-13 21:42:22.902 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:42:23.016 +07:00 [ERR] Đã xảy ra lỗi không mong muốn
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - APi.Controllers.ProductsController.getCategory (APi). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at APi.Services.GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\hocAPI\APi\APi\Services\GlobalExceptionMiddleware.cs:line 16
2025-11-13 21:42:23.024 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 500 null application/json; charset=utf-8 122.6602ms
2025-11-13 21:42:23.202 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/favicon.ico - null null
2025-11-13 21:42:23.212 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/favicon.ico - 404 0 null 9.7091ms
2025-11-13 21:42:23.233 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7161/favicon.ico, Response status code: 404
2025-11-13 21:42:58.501 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/index.html - null null
2025-11-13 21:42:58.536 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/index.html - 200 null text/html;charset=utf-8 36.3235ms
2025-11-13 21:42:58.587 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-13 21:42:58.603 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_vs/browserLink - null null
2025-11-13 21:42:58.614 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 26.4676ms
2025-11-13 21:42:58.661 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.4281ms
2025-11-13 21:42:58.962 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:42:59.063 +07:00 [ERR] Đã xảy ra lỗi không mong muốn
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - APi.Controllers.ProductsController.getCategory (APi). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at APi.Services.GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\hocAPI\APi\APi\Services\GlobalExceptionMiddleware.cs:line 16
2025-11-13 21:42:59.088 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 500 null application/json; charset=utf-8 126.4935ms
2025-11-13 21:43:07.545 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-13 21:43:08.207 +07:00 [INF] Now listening on: https://localhost:7161
2025-11-13 21:43:08.211 +07:00 [INF] Now listening on: http://localhost:5266
2025-11-13 21:43:08.218 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-13 21:43:08.221 +07:00 [INF] Hosting environment: Development
2025-11-13 21:43:08.230 +07:00 [INF] Content root path: D:\hocAPI\APi\APi
2025-11-13 21:43:09.169 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/index.html - null null
2025-11-13 21:43:09.953 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-13 21:43:09.963 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/index.html - 200 null text/html;charset=utf-8 836.0237ms
2025-11-13 21:43:09.986 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 33.3185ms
2025-11-13 21:43:09.953 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_vs/browserLink - null null
2025-11-13 21:43:10.098 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 145.2832ms
2025-11-13 21:43:10.465 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:43:10.756 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 291.7588ms
2025-11-13 21:43:52.240 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/v1/Products/Category - null null
2025-11-13 21:43:52.395 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.getCategory (APi)'
2025-11-13 21:43:52.593 +07:00 [INF] Route matched with {action = "getCategory", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getCategory() on controller APi.Controllers.ProductsController (APi).
2025-11-13 21:43:55.536 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[MaLoai], [l].[MoTa], [l].[TenLoai]
FROM [Loai] AS [l]
2025-11-13 21:43:55.656 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[APi.Models.LoaiModel, APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-13 21:43:55.687 +07:00 [INF] Executed action APi.Controllers.ProductsController.getCategory (APi) in 3081.5944ms
2025-11-13 21:43:55.692 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.getCategory (APi)'
2025-11-13 21:43:55.707 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/v1/Products/Category - 200 null application/json; charset=utf-8 3467.9945ms
2025-11-13 21:46:08.766 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - application/json 306
2025-11-13 21:46:08.785 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:46:08.788 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:46:08.806 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-11-13 21:46:08.815 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-13 21:46:08.827 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - 401 0 null 61.2368ms
2025-11-13 21:46:25.408 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json - null null
2025-11-13 21:46:25.420 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 13.1131ms
2025-11-13 21:46:25.442 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-11-13 21:46:35.918 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/v1/Products/CreateProduct - null null
2025-11-13 21:46:35.945 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-11-13 21:46:35.948 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-11-13 21:46:35.952 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/v1/Products/CreateProduct - 405 0 null 34.7247ms
2025-11-13 21:49:21.724 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Auth/Login - application/json 49
2025-11-13 21:49:21.752 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:49:21.754 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:49:21.757 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-11-13 21:49:21.772 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(APi.Models.LoginRequestDTO) on controller APi.Controllers.AuthController (APi).
2025-11-13 21:49:22.026 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@__request_Username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[createdAt], [u].[email], [u].[fullname], [u].[isActive], [u].[lastLogin], [u].[password], [u].[phone], [u].[role], [u].[username]
FROM [Users] AS [u]
WHERE [u].[username] = @__request_Username_0 AND [u].[isActive] = CAST(1 AS bit)
2025-11-13 21:49:22.543 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[APi.Models.DTO.AuthResponse, APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-13 21:49:22.559 +07:00 [INF] Executed action APi.Controllers.AuthController.Login (APi) in 783.6048ms
2025-11-13 21:49:22.564 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-11-13 21:49:22.568 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Auth/Login - 200 null application/json; charset=utf-8 844.5637ms
2025-11-13 21:49:40.646 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/Auth/profile1 - null null
2025-11-13 21:49:40.704 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.GetProfile (APi)'
2025-11-13 21:49:40.709 +07:00 [INF] Route matched with {action = "GetProfile", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProfile() on controller APi.Controllers.AuthController (APi).
2025-11-13 21:49:40.717 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`5[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-13 21:49:40.724 +07:00 [INF] Executed action APi.Controllers.AuthController.GetProfile (APi) in 10.0709ms
2025-11-13 21:49:40.728 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.GetProfile (APi)'
2025-11-13 21:49:40.732 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/Auth/profile1 - 200 null application/json; charset=utf-8 86.0798ms
2025-11-13 21:49:47.588 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - application/json 306
2025-11-13 21:49:47.612 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:49:47.624 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:49:47.630 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.CreateProduct (APi)'
2025-11-13 21:49:47.667 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(APi.Models.Product) on controller APi.Controllers.ProductsController (APi).
2025-11-13 21:49:48.074 +07:00 [ERR] Failed executing DbCommand (35ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (Size = 500), @p8='?' (Size = 200), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Loai] ([Id], [MaLoai], [MoTa], [TenLoai])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [products] ([CategoryId], [CreatedAt], [Description], [ImagePath], [Name], [Price], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-13 21:49:48.149 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'APi.Models.DbLoaiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Loai' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:622ce1ef-2e8d-40da-8978-4393ba2425f6
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Loai' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:622ce1ef-2e8d-40da-8978-4393ba2425f6
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-13 21:49:48.292 +07:00 [ERR] Error creating product
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Loai' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:622ce1ef-2e8d-40da-8978-4393ba2425f6
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at APi.Controllers.ProductsController.CreateProduct(Product product) in D:\hocAPI\APi\APi\Controllers\ProductsController.cs:line 157
2025-11-13 21:49:48.338 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-13 21:49:48.342 +07:00 [INF] Executed action APi.Controllers.ProductsController.CreateProduct (APi) in 657.8448ms
2025-11-13 21:49:48.346 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.CreateProduct (APi)'
2025-11-13 21:49:48.349 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - 500 null application/json; charset=utf-8 762.1791ms
2025-11-13 21:49:55.608 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json - null null
2025-11-13 21:49:55.625 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 18.407ms
2025-11-13 21:49:55.648 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7161/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-11-13 21:50:00.895 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/v1/Products/CreateProduct - null null
2025-11-13 21:50:00.921 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-11-13 21:50:00.925 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-11-13 21:50:00.928 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/v1/Products/CreateProduct - 405 0 null 33.4564ms
2025-11-13 21:50:30.635 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - application/json 306
2025-11-13 21:50:30.652 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:50:30.654 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:50:30.658 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.CreateProduct (APi)'
2025-11-13 21:50:30.661 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(APi.Models.Product) on controller APi.Controllers.ProductsController (APi).
2025-11-13 21:50:30.684 +07:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (Size = 500), @p8='?' (Size = 200), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Loai] ([Id], [MaLoai], [MoTa], [TenLoai])
VALUES (@p0, @p1, @p2, @p3);
INSERT INTO [products] ([CategoryId], [CreatedAt], [Description], [ImagePath], [Name], [Price], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-13 21:50:30.696 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'APi.Models.DbLoaiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Loai' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:622ce1ef-2e8d-40da-8978-4393ba2425f6
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Loai' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:622ce1ef-2e8d-40da-8978-4393ba2425f6
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-13 21:50:30.830 +07:00 [ERR] Error creating product
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Loai' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:622ce1ef-2e8d-40da-8978-4393ba2425f6
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at APi.Controllers.ProductsController.CreateProduct(Product product) in D:\hocAPI\APi\APi\Controllers\ProductsController.cs:line 157
2025-11-13 21:50:30.859 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-13 21:50:30.863 +07:00 [INF] Executed action APi.Controllers.ProductsController.CreateProduct (APi) in 196.7839ms
2025-11-13 21:50:30.878 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.CreateProduct (APi)'
2025-11-13 21:50:30.884 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - 500 null application/json; charset=utf-8 250.1218ms
2025-11-13 21:53:00.128 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-13 21:53:00.573 +07:00 [INF] Now listening on: https://localhost:7161
2025-11-13 21:53:00.577 +07:00 [INF] Now listening on: http://localhost:5266
2025-11-13 21:53:00.583 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-13 21:53:00.585 +07:00 [INF] Hosting environment: Development
2025-11-13 21:53:00.588 +07:00 [INF] Content root path: D:\hocAPI\APi\APi
2025-11-13 21:53:01.299 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/index.html - null null
2025-11-13 21:53:01.526 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/index.html - 200 null text/html;charset=utf-8 235.6773ms
2025-11-13 21:53:01.547 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_vs/browserLink - null null
2025-11-13 21:53:01.547 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-13 21:53:01.614 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 67.5913ms
2025-11-13 21:53:01.699 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 152.2011ms
2025-11-13 21:53:01.840 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:53:02.116 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 276.6302ms
2025-11-13 21:56:37.172 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Auth/Login - application/json 49
2025-11-13 21:56:37.207 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:56:37.210 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:56:37.340 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-11-13 21:56:37.404 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(APi.Models.LoginRequestDTO) on controller APi.Controllers.AuthController (APi).
2025-11-13 21:56:39.612 +07:00 [INF] Executed DbCommand (79ms) [Parameters=[@__request_Username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[createdAt], [u].[email], [u].[fullname], [u].[isActive], [u].[lastLogin], [u].[password], [u].[phone], [u].[role], [u].[username]
FROM [Users] AS [u]
WHERE [u].[username] = @__request_Username_0 AND [u].[isActive] = CAST(1 AS bit)
2025-11-13 21:56:40.547 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[APi.Models.DTO.AuthResponse, APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-13 21:56:40.586 +07:00 [INF] Executed action APi.Controllers.AuthController.Login (APi) in 3170.2301ms
2025-11-13 21:56:40.591 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-11-13 21:56:40.608 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Auth/Login - 200 null application/json; charset=utf-8 3435.9801ms
2025-11-13 21:57:27.403 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - application/json 203
2025-11-13 21:57:27.422 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:57:27.425 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:57:27.485 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.CreateProduct (APi)'
2025-11-13 21:57:27.495 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(APi.Models.Product) on controller APi.Controllers.ProductsController (APi).
2025-11-13 21:57:27.525 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-13 21:57:27.548 +07:00 [INF] Executed action APi.Controllers.ProductsController.CreateProduct (APi) in 48.2468ms
2025-11-13 21:57:27.552 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.CreateProduct (APi)'
2025-11-13 21:57:27.555 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - 400 null application/problem+json; charset=utf-8 153.9484ms
2025-11-13 21:58:10.195 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - application/json 202
2025-11-13 21:58:10.213 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:58:10.216 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:58:10.223 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.CreateProduct (APi)'
2025-11-13 21:58:10.226 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(APi.Models.Product) on controller APi.Controllers.ProductsController (APi).
2025-11-13 21:58:10.237 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-13 21:58:10.241 +07:00 [INF] Executed action APi.Controllers.ProductsController.CreateProduct (APi) in 9.0514ms
2025-11-13 21:58:10.252 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.CreateProduct (APi)'
2025-11-13 21:58:10.255 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - 400 null application/problem+json; charset=utf-8 60.8405ms
2025-11-13 21:58:25.611 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - application/json 202
2025-11-13 21:58:25.618 +07:00 [INF] CORS policy execution failed.
2025-11-13 21:58:25.620 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-11-13 21:58:25.627 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.CreateProduct (APi)'
2025-11-13 21:58:25.630 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(APi.Models.Product) on controller APi.Controllers.ProductsController (APi).
2025-11-13 21:58:25.637 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-13 21:58:25.642 +07:00 [INF] Executed action APi.Controllers.ProductsController.CreateProduct (APi) in 6.1192ms
2025-11-13 21:58:25.646 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.CreateProduct (APi)'
2025-11-13 21:58:25.649 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/v1/Products/CreateProduct - 400 null application/problem+json; charset=utf-8 39.0023ms
2025-11-13 21:58:46.343 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-13 21:58:46.877 +07:00 [INF] Now listening on: https://localhost:7161
2025-11-13 21:58:46.880 +07:00 [INF] Now listening on: http://localhost:5266
2025-11-13 21:58:46.885 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-13 21:58:46.887 +07:00 [INF] Hosting environment: Development
2025-11-13 21:58:46.889 +07:00 [INF] Content root path: D:\hocAPI\APi\APi
2025-11-13 21:58:47.516 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/index.html - null null
2025-11-13 21:58:47.764 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/index.html - 200 null text/html;charset=utf-8 259.8159ms
2025-11-13 21:58:47.781 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-13 21:58:47.781 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_vs/browserLink - null null
2025-11-13 21:58:47.808 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 26.7171ms
2025-11-13 21:58:47.873 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 91.5717ms
2025-11-13 21:58:48.007 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-11-13 21:58:48.321 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 314.4823ms
