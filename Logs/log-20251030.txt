2025-10-30 21:51:26.097 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-30 21:51:26.631 +07:00 [INF] Now listening on: https://localhost:7161
2025-10-30 21:51:26.634 +07:00 [INF] Now listening on: http://localhost:5266
2025-10-30 21:51:26.640 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-30 21:51:26.642 +07:00 [INF] Hosting environment: Development
2025-10-30 21:51:26.644 +07:00 [INF] Content root path: D:\hocAPI\APi\APi
2025-10-30 21:51:29.265 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/index.html - null null
2025-10-30 21:51:30.018 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/index.html - 200 null text/html;charset=utf-8 776.7252ms
2025-10-30 21:51:30.151 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - null null
2025-10-30 21:51:30.177 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 26.4869ms
2025-10-30 21:51:30.947 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_vs/browserLink - null null
2025-10-30 21:51:31.532 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 585.6702ms
2025-10-30 21:51:32.007 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-10-30 21:51:32.498 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 490.8443ms
2025-10-30 21:51:57.952 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Auth/Login - application/json 49
2025-10-30 21:51:58.016 +07:00 [INF] CORS policy execution failed.
2025-10-30 21:51:58.020 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 21:51:59.892 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-10-30 21:51:59.945 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(APi.Models.LoginRequestDTO) on controller APi.Controllers.AuthController (APi).
2025-10-30 21:52:03.904 +07:00 [INF] Executed DbCommand (216ms) [Parameters=[@__request_Username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[createdAt], [u].[email], [u].[fullname], [u].[isActive], [u].[lastLogin], [u].[password], [u].[phone], [u].[role], [u].[username]
FROM [Users] AS [u]
WHERE [u].[username] = @__request_Username_0 AND [u].[isActive] = CAST(1 AS bit)
2025-10-30 21:52:04.081 +07:00 [ERR] Error during login for user: amdin
System.UnauthorizedAccessException: Tên đăng nhập không tồn tại
   at APi.Services.AuthService.LoginAsync(LoginRequestDTO request) in D:\hocAPI\APi\APi\Services\AuthService .cs:line 69
2025-10-30 21:52:04.324 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-30 21:52:04.366 +07:00 [INF] Executed action APi.Controllers.AuthController.Login (APi) in 4407.2825ms
2025-10-30 21:52:04.371 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-10-30 21:52:04.389 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Auth/Login - 401 null application/json; charset=utf-8 6436.6412ms
2025-10-30 21:52:13.828 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Auth/Login - application/json 49
2025-10-30 21:52:13.839 +07:00 [INF] CORS policy execution failed.
2025-10-30 21:52:13.842 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 21:52:13.846 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-10-30 21:52:13.850 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(APi.Models.LoginRequestDTO) on controller APi.Controllers.AuthController (APi).
2025-10-30 21:52:13.904 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_Username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[createdAt], [u].[email], [u].[fullname], [u].[isActive], [u].[lastLogin], [u].[password], [u].[phone], [u].[role], [u].[username]
FROM [Users] AS [u]
WHERE [u].[username] = @__request_Username_0 AND [u].[isActive] = CAST(1 AS bit)
2025-10-30 21:52:14.687 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[APi.Models.DTO.AuthResponse, APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-30 21:52:14.703 +07:00 [INF] Executed action APi.Controllers.AuthController.Login (APi) in 849.1367ms
2025-10-30 21:52:14.707 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-10-30 21:52:14.711 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Auth/Login - 200 null application/json; charset=utf-8 882.9572ms
2025-10-30 21:54:26.933 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/Products/AllProduct - null null
2025-10-30 21:54:27.001 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-10-30 21:54:27.008 +07:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProducts() on controller APi.Controllers.ProductsController (APi).
2025-10-30 21:54:27.129 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [p].[Description], [p].[Price], [p].[ImagePath], [p].[CreatedAt], [p].[UpdatedAt], [l].[Id], [l].[TenLoai]
FROM [products] AS [p]
INNER JOIN [Loai] AS [l] ON [p].[CategoryId] = [l].[Id]
2025-10-30 21:54:27.135 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType8`8[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType9`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-30 21:54:27.154 +07:00 [INF] Executed action APi.Controllers.ProductsController.GetProducts (APi) in 140.4613ms
2025-10-30 21:54:27.178 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-10-30 21:54:27.187 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/Products/AllProduct - 200 null application/json; charset=utf-8 253.2242ms
2025-10-30 22:00:40.943 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:00:40.959 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:00:40.961 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:00:40.973 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:00:40.979 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:00:40.983 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 40.3571ms
2025-10-30 22:00:46.360 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:00:46.367 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:00:46.369 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:00:46.375 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:00:46.378 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:00:46.380 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 20.1037ms
2025-10-30 22:00:46.578 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:00:46.591 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:00:46.593 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:00:46.596 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:00:46.607 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:00:46.612 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 33.2629ms
2025-10-30 22:00:46.725 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:00:46.733 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:00:46.735 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:00:46.739 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:00:46.742 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:00:46.745 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 20.4489ms
2025-10-30 22:00:46.899 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:00:46.908 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:00:46.910 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:00:46.913 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:00:46.916 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:00:46.919 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 20.6363ms
2025-10-30 22:00:47.020 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:00:47.039 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:00:47.041 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:00:47.047 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:00:47.049 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:00:47.054 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 34.4524ms
2025-10-30 22:00:50.334 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Auth/Login - application/json 49
2025-10-30 22:00:50.341 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:00:50.345 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:00:50.348 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-10-30 22:00:50.352 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(APi.Models.LoginRequestDTO) on controller APi.Controllers.AuthController (APi).
2025-10-30 22:00:50.390 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_Username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[createdAt], [u].[email], [u].[fullname], [u].[isActive], [u].[lastLogin], [u].[password], [u].[phone], [u].[role], [u].[username]
FROM [Users] AS [u]
WHERE [u].[username] = @__request_Username_0 AND [u].[isActive] = CAST(1 AS bit)
2025-10-30 22:00:50.610 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[APi.Models.DTO.AuthResponse, APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-30 22:00:50.614 +07:00 [INF] Executed action APi.Controllers.AuthController.Login (APi) in 256.5347ms
2025-10-30 22:00:50.619 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.Login (APi)'
2025-10-30 22:00:50.622 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Auth/Login - 200 null application/json; charset=utf-8 288.7666ms
2025-10-30 22:01:10.663 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:01:10.677 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:01:10.679 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:01:10.682 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:01:10.685 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:01:10.689 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 26.2781ms
2025-10-30 22:01:13.949 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:01:13.956 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:01:13.958 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:01:13.961 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:01:13.964 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:01:13.967 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 18.7773ms
2025-10-30 22:01:14.420 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:01:14.427 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:01:14.429 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:01:14.433 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:01:14.436 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:01:14.439 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 19.3172ms
2025-10-30 22:01:14.633 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:01:14.646 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:01:14.648 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:01:14.651 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:01:14.654 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:01:14.657 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 25.0652ms
2025-10-30 22:01:14.816 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:01:14.834 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:01:14.837 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:01:14.840 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:01:14.843 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:01:14.846 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 30.8935ms
2025-10-30 22:01:14.972 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:01:14.978 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:01:14.980 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:01:14.983 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:01:14.987 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:01:14.989 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 17.4818ms
2025-10-30 22:01:15.214 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:01:15.233 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:01:15.238 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:01:15.241 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:01:15.244 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:01:15.247 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 32.5598ms
2025-10-30 22:01:15.395 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:01:15.402 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:01:15.405 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:01:15.408 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:01:15.412 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:01:15.415 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 20.7863ms
2025-10-30 22:01:15.708 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:01:15.716 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:01:15.719 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:01:15.723 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:01:15.726 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:01:15.728 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 21.0818ms
2025-10-30 22:01:15.994 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:01:16.012 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:01:16.014 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:01:16.019 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:01:16.022 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:01:16.025 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 31.4987ms
2025-10-30 22:01:25.966 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/Products/AllProduct - null null
2025-10-30 22:01:25.987 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-10-30 22:01:25.990 +07:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProducts() on controller APi.Controllers.ProductsController (APi).
2025-10-30 22:01:26.000 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [p].[Description], [p].[Price], [p].[ImagePath], [p].[CreatedAt], [p].[UpdatedAt], [l].[Id], [l].[TenLoai]
FROM [products] AS [p]
INNER JOIN [Loai] AS [l] ON [p].[CategoryId] = [l].[Id]
2025-10-30 22:01:26.005 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType8`8[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType9`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-30 22:01:26.008 +07:00 [INF] Executed action APi.Controllers.ProductsController.GetProducts (APi) in 12.9947ms
2025-10-30 22:01:26.011 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-10-30 22:01:26.014 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/Products/AllProduct - 200 null application/json; charset=utf-8 48.5262ms
2025-10-30 22:01:26.769 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/Products/AllProduct - null null
2025-10-30 22:01:26.786 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-10-30 22:01:26.787 +07:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProducts() on controller APi.Controllers.ProductsController (APi).
2025-10-30 22:01:26.799 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [p].[Description], [p].[Price], [p].[ImagePath], [p].[CreatedAt], [p].[UpdatedAt], [l].[Id], [l].[TenLoai]
FROM [products] AS [p]
INNER JOIN [Loai] AS [l] ON [p].[CategoryId] = [l].[Id]
2025-10-30 22:01:26.803 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType8`8[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType9`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-30 22:01:26.807 +07:00 [INF] Executed action APi.Controllers.ProductsController.GetProducts (APi) in 15.3341ms
2025-10-30 22:01:26.810 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-10-30 22:01:26.813 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/Products/AllProduct - 200 null application/json; charset=utf-8 44.1359ms
2025-10-30 22:01:31.419 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/Products/AllProduct - null null
2025-10-30 22:01:31.426 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-10-30 22:01:31.428 +07:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProducts() on controller APi.Controllers.ProductsController (APi).
2025-10-30 22:01:31.439 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [p].[Description], [p].[Price], [p].[ImagePath], [p].[CreatedAt], [p].[UpdatedAt], [l].[Id], [l].[TenLoai]
FROM [products] AS [p]
INNER JOIN [Loai] AS [l] ON [p].[CategoryId] = [l].[Id]
2025-10-30 22:01:31.444 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType8`8[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType9`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-30 22:01:31.447 +07:00 [INF] Executed action APi.Controllers.ProductsController.GetProducts (APi) in 14.526ms
2025-10-30 22:01:31.450 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-10-30 22:01:31.452 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/Products/AllProduct - 200 null application/json; charset=utf-8 34.0409ms
2025-10-30 22:07:17.216 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - application/json 349
2025-10-30 22:07:17.231 +07:00 [INF] CORS policy execution failed.
2025-10-30 22:07:17.233 +07:00 [INF] Request origin https://localhost:7161 does not have permission to access the resource.
2025-10-30 22:07:17.235 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-30 22:07:17.238 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-30 22:07:17.241 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7161/api/Products/CreateProduct - 403 0 null 26.5927ms
2025-10-30 22:07:23.419 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/Products/AllProduct - null null
2025-10-30 22:07:23.465 +07:00 [INF] Executing endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-10-30 22:07:23.468 +07:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProducts() on controller APi.Controllers.ProductsController (APi).
2025-10-30 22:07:23.525 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [p].[Description], [p].[Price], [p].[ImagePath], [p].[CreatedAt], [p].[UpdatedAt], [l].[Id], [l].[TenLoai]
FROM [products] AS [p]
INNER JOIN [Loai] AS [l] ON [p].[CategoryId] = [l].[Id]
2025-10-30 22:07:23.536 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType8`8[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType9`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-30 22:07:23.543 +07:00 [INF] Executed action APi.Controllers.ProductsController.GetProducts (APi) in 54.7052ms
2025-10-30 22:07:23.548 +07:00 [INF] Executed endpoint 'APi.Controllers.ProductsController.GetProducts (APi)'
2025-10-30 22:07:23.551 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/Products/AllProduct - 200 null application/json; charset=utf-8 131.9067ms
2025-10-30 22:07:39.459 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/api/Auth/profile - null null
2025-10-30 22:07:39.467 +07:00 [INF] Executing endpoint 'APi.Controllers.AuthController.GetProfile (APi)'
2025-10-30 22:07:39.487 +07:00 [INF] Route matched with {action = "GetProfile", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProfile() on controller APi.Controllers.AuthController (APi).
2025-10-30 22:07:39.498 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`5[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], APi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-30 22:07:39.517 +07:00 [INF] Executed action APi.Controllers.AuthController.GetProfile (APi) in 25.1949ms
2025-10-30 22:07:39.521 +07:00 [INF] Executed endpoint 'APi.Controllers.AuthController.GetProfile (APi)'
2025-10-30 22:07:39.525 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/api/Auth/profile - 200 null application/json; charset=utf-8 66.821ms
2025-10-30 22:13:59.928 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-30 22:14:00.278 +07:00 [FTL] Application startup exception
Microsoft.AspNetCore.Routing.Patterns.RoutePatternException: There is an incomplete parameter in the route template. Check that each '{' character has a matching '}' character.
   at Microsoft.AspNetCore.Routing.Patterns.RoutePatternParser.Parse(String pattern)
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointFactory.AddEndpoints(List`1 endpoints, HashSet`1 routeNames, ActionDescriptor action, IReadOnlyList`1 routes, IReadOnlyList`1 conventions, IReadOnlyList`1 groupConventions, IReadOnlyList`1 finallyConventions, IReadOnlyList`1 groupFinallyConventions, Boolean createInertEndpoints, RoutePattern groupPrefix)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerActionEndpointDataSource.CreateEndpoints(RoutePattern groupPrefix, IReadOnlyList`1 actions, IReadOnlyList`1 conventions, IReadOnlyList`1 groupConventions, IReadOnlyList`1 finallyConventions, IReadOnlyList`1 groupFinallyConventions)
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.UpdateEndpoints()
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.Initialize()
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.GetChangeToken()
   at Microsoft.Extensions.Primitives.ChangeToken.ChangeTokenRegistration`1..ctor(Func`1 changeTokenProducer, Action`1 changeTokenConsumer, TState state)
   at Microsoft.Extensions.Primitives.ChangeToken.OnChange(Func`1 changeTokenProducer, Action changeTokenConsumer)
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.CreateChangeTokenUnsynchronized(Boolean collectionChanged)
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.EnsureChangeTokenInitialized()
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.GetChangeToken()
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.Initialize()
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.EnsureInitialized()
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationPolicyCache..ctor(EndpointDataSource dataSource)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware..ctor(RequestDelegate next, IAuthorizationPolicyProvider policyProvider, IServiceProvider services)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddlewareInternal..ctor(RequestDelegate next, IServiceProvider services, IAuthorizationPolicyProvider policyProvider, ILogger`1 logger)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2025-10-30 22:14:00.378 +07:00 [ERR] Hosting failed to start
Microsoft.AspNetCore.Routing.Patterns.RoutePatternException: There is an incomplete parameter in the route template. Check that each '{' character has a matching '}' character.
   at Microsoft.AspNetCore.Routing.Patterns.RoutePatternParser.Parse(String pattern)
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointFactory.AddEndpoints(List`1 endpoints, HashSet`1 routeNames, ActionDescriptor action, IReadOnlyList`1 routes, IReadOnlyList`1 conventions, IReadOnlyList`1 groupConventions, IReadOnlyList`1 finallyConventions, IReadOnlyList`1 groupFinallyConventions, Boolean createInertEndpoints, RoutePattern groupPrefix)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerActionEndpointDataSource.CreateEndpoints(RoutePattern groupPrefix, IReadOnlyList`1 actions, IReadOnlyList`1 conventions, IReadOnlyList`1 groupConventions, IReadOnlyList`1 finallyConventions, IReadOnlyList`1 groupFinallyConventions)
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.UpdateEndpoints()
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.Initialize()
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.GetChangeToken()
   at Microsoft.Extensions.Primitives.ChangeToken.ChangeTokenRegistration`1..ctor(Func`1 changeTokenProducer, Action`1 changeTokenConsumer, TState state)
   at Microsoft.Extensions.Primitives.ChangeToken.OnChange(Func`1 changeTokenProducer, Action changeTokenConsumer)
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.CreateChangeTokenUnsynchronized(Boolean collectionChanged)
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.EnsureChangeTokenInitialized()
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.GetChangeToken()
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.Initialize()
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.EnsureInitialized()
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationPolicyCache..ctor(EndpointDataSource dataSource)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware..ctor(RequestDelegate next, IAuthorizationPolicyProvider policyProvider, IServiceProvider services)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddlewareInternal..ctor(RequestDelegate next, IServiceProvider services, IAuthorizationPolicyProvider policyProvider, ILogger`1 logger)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-10-30 22:16:17.135 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-30 22:16:17.403 +07:00 [FTL] Application startup exception
Microsoft.AspNetCore.Routing.Patterns.RoutePatternException: There is an incomplete parameter in the route template. Check that each '{' character has a matching '}' character.
   at Microsoft.AspNetCore.Routing.Patterns.RoutePatternParser.Parse(String pattern)
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointFactory.AddEndpoints(List`1 endpoints, HashSet`1 routeNames, ActionDescriptor action, IReadOnlyList`1 routes, IReadOnlyList`1 conventions, IReadOnlyList`1 groupConventions, IReadOnlyList`1 finallyConventions, IReadOnlyList`1 groupFinallyConventions, Boolean createInertEndpoints, RoutePattern groupPrefix)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerActionEndpointDataSource.CreateEndpoints(RoutePattern groupPrefix, IReadOnlyList`1 actions, IReadOnlyList`1 conventions, IReadOnlyList`1 groupConventions, IReadOnlyList`1 finallyConventions, IReadOnlyList`1 groupFinallyConventions)
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.UpdateEndpoints()
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.Initialize()
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.GetChangeToken()
   at Microsoft.Extensions.Primitives.ChangeToken.ChangeTokenRegistration`1..ctor(Func`1 changeTokenProducer, Action`1 changeTokenConsumer, TState state)
   at Microsoft.Extensions.Primitives.ChangeToken.OnChange(Func`1 changeTokenProducer, Action changeTokenConsumer)
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.CreateChangeTokenUnsynchronized(Boolean collectionChanged)
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.EnsureChangeTokenInitialized()
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.GetChangeToken()
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.Initialize()
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.EnsureInitialized()
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationPolicyCache..ctor(EndpointDataSource dataSource)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware..ctor(RequestDelegate next, IAuthorizationPolicyProvider policyProvider, IServiceProvider services)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddlewareInternal..ctor(RequestDelegate next, IServiceProvider services, IAuthorizationPolicyProvider policyProvider, ILogger`1 logger)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2025-10-30 22:16:17.483 +07:00 [ERR] Hosting failed to start
Microsoft.AspNetCore.Routing.Patterns.RoutePatternException: There is an incomplete parameter in the route template. Check that each '{' character has a matching '}' character.
   at Microsoft.AspNetCore.Routing.Patterns.RoutePatternParser.Parse(String pattern)
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointFactory.AddEndpoints(List`1 endpoints, HashSet`1 routeNames, ActionDescriptor action, IReadOnlyList`1 routes, IReadOnlyList`1 conventions, IReadOnlyList`1 groupConventions, IReadOnlyList`1 finallyConventions, IReadOnlyList`1 groupFinallyConventions, Boolean createInertEndpoints, RoutePattern groupPrefix)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerActionEndpointDataSource.CreateEndpoints(RoutePattern groupPrefix, IReadOnlyList`1 actions, IReadOnlyList`1 conventions, IReadOnlyList`1 groupConventions, IReadOnlyList`1 finallyConventions, IReadOnlyList`1 groupFinallyConventions)
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.UpdateEndpoints()
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.Initialize()
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointDataSourceBase.GetChangeToken()
   at Microsoft.Extensions.Primitives.ChangeToken.ChangeTokenRegistration`1..ctor(Func`1 changeTokenProducer, Action`1 changeTokenConsumer, TState state)
   at Microsoft.Extensions.Primitives.ChangeToken.OnChange(Func`1 changeTokenProducer, Action changeTokenConsumer)
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.CreateChangeTokenUnsynchronized(Boolean collectionChanged)
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.EnsureChangeTokenInitialized()
   at Microsoft.AspNetCore.Routing.CompositeEndpointDataSource.GetChangeToken()
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.Initialize()
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.EnsureInitialized()
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationPolicyCache..ctor(EndpointDataSource dataSource)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware..ctor(RequestDelegate next, IAuthorizationPolicyProvider policyProvider, IServiceProvider services)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddlewareInternal..ctor(RequestDelegate next, IServiceProvider services, IAuthorizationPolicyProvider policyProvider, ILogger`1 logger)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-10-30 22:17:54.443 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-30 22:17:54.958 +07:00 [INF] Now listening on: https://localhost:7161
2025-10-30 22:17:54.960 +07:00 [INF] Now listening on: http://localhost:5266
2025-10-30 22:17:54.963 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-30 22:17:54.965 +07:00 [INF] Hosting environment: Development
2025-10-30 22:17:54.967 +07:00 [INF] Content root path: D:\hocAPI\APi\APi
2025-10-30 22:17:56.875 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/index.html - null null
2025-10-30 22:17:57.416 +07:00 [ERR] Đã xảy ra lỗi không mong muốn
System.ArgumentException: An item with the same key has already been added. Key: v1
   at System.Collections.Generic.Dictionary`2.TryInsert(TKey key, TValue value, InsertionBehavior behavior)
   at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value)
   at Microsoft.Extensions.DependencyInjection.SwaggerGenOptionsExtensions.SwaggerDoc(SwaggerGenOptions swaggerGenOptions, String name, OpenApiInfo info)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__9(SwaggerGenOptions options) in D:\hocAPI\APi\APi\Program.cs:line 154
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.UnnamedOptionsManager`1.get_Value()
   at Swashbuckle.AspNetCore.SwaggerGen.ConfigureSwaggerGeneratorOptions..ctor(IOptions`1 swaggerGenOptionsAccessor, IServiceProvider serviceProvider, IWebHostEnvironment hostingEnv)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitIEnumerable(IEnumerableCallSite enumerableCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitNoCache(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.SwaggerGenServiceCollectionExtensions.<>c.<AddSwaggerGen>b__0_1(IServiceProvider s)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method3(Closure, Object, HttpContext, IServiceProvider)
   at APi.Services.GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\hocAPI\APi\APi\Services\GlobalExceptionMiddleware.cs:line 16
2025-10-30 22:17:57.679 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/index.html - 500 null application/json; charset=utf-8 820.5645ms
2025-10-30 22:17:58.291 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/favicon.ico - null null
2025-10-30 22:17:58.448 +07:00 [ERR] Đã xảy ra lỗi không mong muốn
System.ArgumentException: An item with the same key has already been added. Key: v1
   at System.Collections.Generic.Dictionary`2.TryInsert(TKey key, TValue value, InsertionBehavior behavior)
   at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value)
   at Microsoft.Extensions.DependencyInjection.SwaggerGenOptionsExtensions.SwaggerDoc(SwaggerGenOptions swaggerGenOptions, String name, OpenApiInfo info)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__9(SwaggerGenOptions options) in D:\hocAPI\APi\APi\Program.cs:line 154
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.UnnamedOptionsManager`1.get_Value()
   at Swashbuckle.AspNetCore.SwaggerGen.ConfigureSwaggerGeneratorOptions..ctor(IOptions`1 swaggerGenOptionsAccessor, IServiceProvider serviceProvider, IWebHostEnvironment hostingEnv)
   at InvokeStub_ConfigureSwaggerGeneratorOptions..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitIEnumerable(IEnumerableCallSite enumerableCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitNoCache(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.SwaggerGenServiceCollectionExtensions.<>c.<AddSwaggerGen>b__0_1(IServiceProvider s)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method3(Closure, Object, HttpContext, IServiceProvider)
   at APi.Services.GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\hocAPI\APi\APi\Services\GlobalExceptionMiddleware.cs:line 16
2025-10-30 22:17:58.479 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/favicon.ico - 500 null application/json; charset=utf-8 187.9127ms
2025-10-30 22:23:15.187 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-30 22:23:15.848 +07:00 [INF] Now listening on: https://localhost:7161
2025-10-30 22:23:15.851 +07:00 [INF] Now listening on: http://localhost:5266
2025-10-30 22:23:15.858 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-30 22:23:15.861 +07:00 [INF] Hosting environment: Development
2025-10-30 22:23:15.864 +07:00 [INF] Content root path: D:\hocAPI\APi\APi
2025-10-30 22:23:19.210 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/index.html - null null
2025-10-30 22:23:20.861 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_vs/browserLink - null null
2025-10-30 22:23:20.865 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - null null
2025-10-30 22:23:20.870 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/index.html - 200 null text/html;charset=utf-8 1728.3455ms
2025-10-30 22:23:20.960 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 95.6115ms
2025-10-30 22:23:21.045 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 189.4614ms
2025-10-30 22:23:22.631 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-10-30 22:23:23.437 +07:00 [ERR] Đã xảy ra lỗi không mong muốn
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - APi.Controllers.ProductsController.GetProduct (APi). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at APi.Services.GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\hocAPI\APi\APi\Services\GlobalExceptionMiddleware.cs:line 16
2025-10-30 22:23:23.927 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 500 null application/json; charset=utf-8 1295.8261ms
2025-10-30 22:25:22.468 +07:00 [INF] User profile is available. Using 'C:\Users\tran dat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-30 22:25:22.831 +07:00 [INF] Now listening on: https://localhost:7161
2025-10-30 22:25:22.834 +07:00 [INF] Now listening on: http://localhost:5266
2025-10-30 22:25:22.838 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-30 22:25:22.841 +07:00 [INF] Hosting environment: Development
2025-10-30 22:25:22.843 +07:00 [INF] Content root path: D:\hocAPI\APi\APi
2025-10-30 22:25:24.253 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/index.html - null null
2025-10-30 22:25:24.649 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/index.html - 200 null text/html;charset=utf-8 414.249ms
2025-10-30 22:25:24.686 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - null null
2025-10-30 22:25:24.690 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/_vs/browserLink - null null
2025-10-30 22:25:24.717 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 30.5755ms
2025-10-30 22:25:24.791 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 100.8078ms
2025-10-30 22:25:25.263 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - null null
2025-10-30 22:25:25.546 +07:00 [ERR] Đã xảy ra lỗi không mong muốn
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - APi.Controllers.ProductsController.GetProduct (APi). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at APi.Services.GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\hocAPI\APi\APi\Services\GlobalExceptionMiddleware.cs:line 16
2025-10-30 22:25:25.624 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7161/swagger/v1/swagger.json - 500 null application/json; charset=utf-8 361.0238ms
